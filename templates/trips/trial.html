<!-- Load Font Awesome for icons -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      referrerpolicy="no-referrer" />

<div>
  <!-- Tabs -->
  <ul class="flex border-b mb-4">
    {% for pkg in packages %}
      <li class="-mb-px mr-4">
        <a href="#pkg{{ pkg.id }}" 
           class="tab-link inline-block py-2 px-4 text-gray-600 hover:text-blue-600 border-b-2 border-transparent"
           data-target="pkg{{ pkg.id }}">
           {{ pkg.name }}
        </a>
      </li>
    {% endfor %}
  </ul>

  <!-- Package Contents -->
  {% for pkg in packages %}
    <div id="pkg{{ pkg.id }}" class="tab-content hidden bg-white p-6 rounded-lg shadow mb-6">
      <h3 class="text-lg font-semibold mb-2">{{ pkg.name }}</h3>
      <p class="text-gray-700 mb-4">{{ pkg.description }}</p>

      <!-- Price & Occupancy -->
      <div class="grid grid-cols-2 gap-4 text-sm text-gray-600 mb-6">
        <div>
          <p class="font-medium">Price</p>
          <p>{{ pkg.price }} KES</p>
        </div>
        <div>
          <p class="font-medium">Max Occupancy</p>
          <p>{{ pkg.max_people }}</p>
        </div>
      </div>

      <!-- Included Items -->
      {% if pkg.get_included_list %}
        <h4 class="text-md font-semibold text-green-700 mb-2">Included</h4>
        <ul class="space-y-1 mb-4">
          {% for item in pkg.get_included_list %}
            <li class="flex items-center text-gray-700">
              <i class="fa fa-check text-green-600 mr-2"></i> {{ item }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}

      <!-- Excluded Items -->
      {% if pkg.get_excluded_list %}
        <h4 class="text-md font-semibold text-red-700 mb-2">Excluded</h4>
        <ul class="space-y-1 mb-4">
          {% for item in pkg.get_excluded_list %}
            <li class="flex items-center text-gray-700">
              <i class="fa fa-times text-red-600 mr-2"></i> {{ item }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}

      <!-- Booking Button -->
      <div class="mt-6">
        <a href="{% url 'bookings:create' trip_slug=trip.slug package_id=pkg.id %}" 
           class="inline-block px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700">
          Book Now
        </a>
      </div>
    </div>
  {% endfor %}
</div>

<script>
  // Simple tab switching logic
  document.querySelectorAll('.tab-link').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      let target = this.dataset.target;

      document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
      document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('border-blue-600', 'text-blue-600'));

      document.getElementById(target).classList.remove('hidden');
      this.classList.add('border-blue-600', 'text-blue-600');
    });
  });

  // Show first tab by default
  const firstTab = document.querySelector('.tab-link');
  if (firstTab) firstTab.click();
</script>
